package rules.accumRules

import com.ftn.sbnz.model.examples_1.Order;
import com.ftn.sbnz.model.examples_1.OrderLine;

rule "10+ items with sale price over 20 get discount"
    when
        $o: Order($lines: orderLines)
        $nm: Number(intValue >= 10) from accumulate(
            OrderLine(
                item.salePrice > 20.00,
                $q: quantity
            ) from $lines,
            init(int count = 0;),
            action(count += $q;), // poziva se nad elemntima koji ispunjavaju s
//            reverse(count -= $q;),
            result(count)
        )
    then
        System.out.println($nm);
        $o.increaseDiscount(0.05);
end